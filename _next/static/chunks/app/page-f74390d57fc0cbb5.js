(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6394:(e,t,r)=>{Promise.resolve().then(r.bind(r,8846))},8846:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var a=r(5155),s=r(2115);let o=(0,r(5647).UU)("https://lnubnmnkagsrqxmedcbu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxudWJubW5rYWdzcnF4bWVkY2J1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4MzE2OTgsImV4cCI6MjA2NjQwNzY5OH0.wO_0ilnoET8rzhwaHf3fwx9YjlS14fsn1rSrJ5Kzf28");var i=r(4624),n=r(2085),l=r(2596),d=r(9688);function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,d.QP)((0,l.$)(t))}let m=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:n=!1,...l}=e,d=n?i.DX:"button";return(0,a.jsx)(d,{className:c(m({variant:s,size:o,className:r})),ref:t,...l})});u.displayName="Button";let f=s.forwardRef((e,t)=>{let{className:r,type:s,...o}=e;return(0,a.jsx)("input",{type:s,className:c("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});f.displayName="Input";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:c("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});g.displayName="Textarea";var h=r(7073);let x=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(h.b,{ref:t,className:c(x(),r),...s})});p.displayName=h.b.displayName;var b=r(3663),y=r(4416);let v=b.bL,N=b.l9,j=b.ZL;b.bm;let w=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(b.hJ,{ref:t,className:c("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});w.displayName=b.hJ.displayName;let _=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(j,{children:[(0,a.jsx)(w,{}),(0,a.jsxs)(b.UC,{ref:t,className:c("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[s,(0,a.jsxs)(b.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(y.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});_.displayName=b.UC.displayName;let S=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:c("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};S.displayName="DialogHeader";let k=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(b.hE,{ref:t,className:c("text-lg font-semibold leading-none tracking-tight",r),...s})});k.displayName=b.hE.displayName;let A=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(b.VY,{ref:t,className:c("text-sm text-muted-foreground",r),...s})});A.displayName=b.VY.displayName;var E=r(2486);let I=0,T=new Map,z=e=>{if(T.has(e))return;let t=setTimeout(()=>{T.delete(e),D({type:"REMOVE_TOAST",toastId:e})},1e6);T.set(e,t)},C=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?z(r):e.toasts.forEach(e=>{z(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},O=[],M={toasts:[]};function D(e){M=C(M,e),O.forEach(e=>{e(M)})}function J(e){let{...t}=e,r=(I=(I+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>D({type:"DISMISS_TOAST",toastId:r});return D({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>D({type:"UPDATE_TOAST",toast:{...e,id:r}})}}let R=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});R.displayName="Card";let F=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("flex flex-col space-y-1.5 p-6",r),...s})});F.displayName="CardHeader";let B=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("text-2xl font-semibold leading-none tracking-tight",r),...s})});B.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let U=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("p-6 pt-0",r),...s})});function V(e){let{message:t,senderName:r,createdAt:o,colorClass:i}=e,[n,l]=(0,s.useState)(!1);return(0,a.jsxs)(R,{className:"\n        ".concat(i,"\n        ").concat(n?"scale-105 z-50":"","\n        p-3 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer\n        border-l-4 border-t-4 relative overflow-hidden w-full max-w-[180px]\n        min-h-[140px] flex flex-col\n      "),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,a.jsx)("div",{className:"absolute -top-2 left-3 w-6 h-3 bg-yellow-300 opacity-60 rotate-45 rounded-sm"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 mb-2",children:(0,a.jsx)("p",{className:"text-gray-800 text-xs leading-relaxed font-handwriting break-words",children:t})}),(0,a.jsxs)("div",{className:"mt-auto",children:[(0,a.jsxs)("div",{className:"text-xs font-semibold text-gray-700 truncate mb-1",children:["- ",r]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 text-right",children:new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black opacity-5 rounded-lg transform translate-x-1 translate-y-1 -z-10"})]})}U.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter";let Y=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function P(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:c(Y({variant:r}),t),...s})}var L=r(9074),H=r(1688);let W=["January","February","March","April","May","June","July","August","September","October","November","December"];function X(e){let{staffMembers:t}=e,r=new Date,s=r.getMonth()+1,o=r.getDate(),i=t.filter(e=>e.birthday_month===s&&e.birthday_day>o).sort((e,t)=>e.birthday_day-t.birthday_day),n=12===s?1:s+1,l=t.filter(e=>e.birthday_month===n).sort((e,t)=>e.birthday_day-t.birthday_day),d=i.length<3;return(0,a.jsxs)("div",{className:"space-y-6",children:[i.length>0&&(0,a.jsxs)(R,{className:"card bg-black bg-opacity-40",children:[(0,a.jsx)(F,{children:(0,a.jsxs)(B,{className:"flex items-center text-white gap-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5 text-white"}),"Upcoming in ",W[s-1]]})}),(0,a.jsx)(U,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(H.A,{className:"h-3 w-3"}),W[e.birthday_month-1]," ",e.birthday_day]})]}),(0,a.jsxs)(P,{variant:"secondary",className:"bg-blue-200 text-blue-800",children:[e.birthday_day-o," day",e.birthday_day-o!=1?"s":""]})]},e.id))})})]}),d&&l.length>0&&(0,a.jsxs)(R,{className:"card bg-black bg-opacity-40",children:[(0,a.jsx)(F,{children:(0,a.jsxs)(B,{className:"flex items-center text-white gap-2 ",children:[(0,a.jsx)(L.A,{className:"h-5 w-5 text-white"}),"Coming in ",W[n-1]]})}),(0,a.jsx)(U,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,6).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(H.A,{className:"h-3 w-3"}),W[e.birthday_month-1]," ",e.birthday_day]})]}),(0,a.jsx)(P,{variant:"secondary",className:"bg-purple-200 text-purple-800",children:"Next month"})]},e.id))})})]}),0===i.length&&0===l.length&&(0,a.jsx)(R,{children:(0,a.jsxs)(U,{className:"text-center py-8",children:[(0,a.jsx)(L.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No upcoming birthdays this month"})]})})]})}let Z=["January","February","March","April","May","June","July","August","September","October","November","December"],q=["bg-yellow-200 border-yellow-300","bg-pink-200 border-pink-300","bg-blue-200 border-blue-300","bg-green-200 border-green-300","bg-purple-200 border-purple-300","bg-orange-200 border-orange-300"],Q=[{top:"1%",left:"1%",rotation:"rotate-3"},{top:"3%",right:"3%",rotation:"-rotate-2"},{top:"25%",left:"2%",rotation:"rotate-4"},{top:"40%",right:"6%",rotation:"rotate-2"},{bottom:"25%",left:"2%",rotation:"-rotate-3"},{bottom:"5%",right:"35%",rotation:"rotate-1"},{bottom:"60",left:"35%",rotation:"-rotate-5"},{bottom:"10%",right:"5%",rotation:"rotate-2"},{top:"40%",left:"15%",rotation:"-rotate-2"},{top:"75%",right:"25%",rotation:"rotate-3"},{top:"10%",left:"12%",rotation:"rotate-1"},{top:"15%",right:"15%",rotation:"-rotate-1"},{bottom:"20%",left:"8%",rotation:"rotate-2"},{bottom:"30%",right:"15%",rotation:"-rotate-2"},{top:"60%",left:"25%",rotation:"rotate-3"},{top:"50%",right:"30%",rotation:"-rotate-3"},{bottom:"40%",left:"40%",rotation:"rotate-4"},{bottom:"50%",right:"25%",rotation:"-rotate-4"},{top:"80%",left:"15%",rotation:"rotate-2"},{top:"80%",right:"85%",rotation:"-rotate-5"}];function G(){let[e,t]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[n,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[x,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[w,I]=(0,s.useState)(!1),{toast:T}=function(){let[e,t]=s.useState(M);return s.useEffect(()=>(O.push(t),()=>{let e=O.indexOf(t);e>-1&&O.splice(e,1)}),[e]),{...e,toast:J,dismiss:e=>D({type:"DISMISS_TOAST",toastId:e})}}();(0,s.useEffect)(()=>{z(),C();let e=o.channel("birthday_messages_realtime").on("postgres_changes",{event:"*",schema:"public",table:"birthday_messages"},()=>{C()}).subscribe();return()=>{e.unsubscribe()}},[]);let z=async()=>{try{let{data:e,error:r}=await o.from("staff_members").select("*").order("birthday_month",{ascending:!0}).order("birthday_day",{ascending:!0});r?console.error("Error fetching staff members:",r):t(e||[])}catch(e){console.error("Unexpected error:",e)}},C=async()=>{try{let{data:e,error:t}=await o.from("birthday_messages").select("*").order("created_at",{ascending:!1});t?console.error("Error fetching messages:",t):i(e||[])}catch(e){console.error("Unexpected error fetching messages:",e)}},R=async e=>{if(e.preventDefault(),!n){T({title:"Error",description:"No staff member selected",variant:"destructive"});return}if(!d.trim()){T({title:"Error",description:"Please enter your name",variant:"destructive"});return}if(!m.trim()){T({title:"Error",description:"Please enter a message",variant:"destructive"});return}b(!0);try{let{data:e,error:t}=await o.from("birthday_messages").insert([{staff_member_id:n.id,sender_name:d.trim(),message:m.trim()}]).select();t?T({title:"Error",description:"Failed to send message: ".concat(t.message),variant:"destructive"}):(T({title:"Success! \uD83C\uDF89",description:"Birthday note added for ".concat(n.name,"!")}),c(""),h(""),j(!1),l(null),C())}catch(e){console.error("Unexpected error:",e),T({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}b(!1)},F=e=>r.filter(t=>t.staff_member_id===e),B=(e,t)=>"".concat(Z[e-1]," ").concat(t),U=(e,t)=>6===e&&30===t,Y=e.filter(e=>U(e.birthday_month,e.birthday_day));return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",style:{backgroundImage:"url('/birthday-board/images/background.jpg')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("img",{src:"/birthday-board/images/logo.png",alt:"Birthday Board Logo",className:"h-16 "}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900"})]}),(0,a.jsx)("div",{className:"fixed bottom-4 right-4",children:(0,a.jsx)(u,{onClick:()=>I(!w),className:"bg-gradient-to-r  from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700  text-white font-bold py-2 px-4 rounded-full shadow-lg",children:w?"Back to Messages":"Upcoming Birthdays"})}),(0,a.jsx)("div",{className:"relative bg-black bg-opacity-50 rounded-3xl border-4 border-dashed border-purple-300 p-8 min-h-[600px] overflow-hidden",children:w?(0,a.jsx)(X,{staffMembers:e}):(0,a.jsxs)(a.Fragment,{children:[0===Y.length&&(0,a.jsx)("div",{className:"text-center mt-20 text-yellow-400 text-5xl",children:"No birthdays today!"}),Y.map(e=>{let t=F(e.id);return(0,a.jsxs)("div",{className:"mb-16",children:[t.map((e,t)=>{let r=Q[t%Q.length],s=q[t%q.length];return(0,a.jsx)("div",{className:"absolute z-10 hover:z-50 focus:z-50",style:{top:r.top,left:r.left,right:r.right,bottom:r.bottom},children:(0,a.jsx)("div",{className:"".concat(r.rotation," max-w-[200px]"),children:(0,a.jsx)(V,{message:e.message,senderName:e.sender_name,createdAt:e.created_at,colorClass:s})})},e.id)}),(0,a.jsxs)("div",{className:"relative z-20 text-center",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h3",{className:"text-4xl font-bold text-yellow-400 mb-4",children:["Happy Birthday ",e.name,"!"]}),(0,a.jsx)("p",{className:"text-2xl text-yellow-400",children:B(e.birthday_month,e.birthday_day)})]}),(0,a.jsx)("div",{className:"flex justify-center gap-4 mb-8",children:(0,a.jsxs)(v,{open:(null==n?void 0:n.id)===e.id,onOpenChange:t=>{t?l(e):(l(null),c(""),h(""))},children:[(0,a.jsx)(N,{asChild:!0,children:(0,a.jsxs)(u,{size:"lg",className:"bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-4 px-8 rounded-full shadow-lg text-lg",children:[(0,a.jsx)(E.A,{className:"h-5 w-5 mr-2"}),"Add Birthday Note"]})}),(0,a.jsxs)(_,{className:"sm:max-w-md",children:[(0,a.jsxs)(S,{children:[(0,a.jsxs)(k,{className:"text-center text-2xl",children:["Birthday Note for ",e.name]}),(0,a.jsx)(A,{className:"text-center",children:"Add your special birthday message!"})]}),(0,a.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(p,{htmlFor:"sender",children:"Your Name"}),(0,a.jsx)(f,{id:"sender",value:d,onChange:e=>c(e.target.value),placeholder:"Enter your name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(p,{htmlFor:"message",children:"Birthday Message"}),(0,a.jsx)(g,{id:"message",value:m,onChange:e=>h(e.target.value),placeholder:"Write your birthday message...",rows:4,required:!0})]}),(0,a.jsx)(u,{type:"submit",className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700",disabled:x,children:x?"Adding Note...":"Add Birthday Note"})]})]})]})}),0===t.length&&(0,a.jsx)("p",{className:"text-lg text-yellow-400",children:"Be the first to add a birthday note!"})]})]},e.id)})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,441,684,358],()=>t(6394)),_N_E=e.O()}]);